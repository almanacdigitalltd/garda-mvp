{% set questions = entry.quiz.all() %}

<div class="c-quiz">
    
    <h3 class="h1 c-quiz__title">
        <span>Test</span>
    </h3>

    <h4 class="h2 c-quiz__subtitle"><span class="fw-medium">{{ entry.parent.title }} - </span><span class="fw-light">{{ entry.parent.productBrand }}</span></h4>
    
    <div class="c-quiz__progress">
        <div class="c-quiz__fraction">
            Question <span></span>
        </div>
        <div class="swiper-pagination c-quiz__bar"></div>
    </div>

    {% if questions|length %}
    <div
        class="swiper c-quiz__swiper"
        data-csrf-token-value="{{ craft.app.request.getCsrfToken() }}"
        data-csrf-token-name="{{ craft.app.config.general.csrfTokenName }}">

        <div class="swiper-wrapper">

            {% for question in questions %}
            {% set qNum = loop.index %}
            <div class="swiper-slide swiper-slide-{{ qNum }}">

                <div class="c-quiz__item">

                    <div class="c-quiz__main">
                
                        <div class="c-quiz__section">
                            {{ question.question_section }}
                        </div>

                        <div class="c-quiz__question">
                            {{ question.question }}
                        </div>

                        {% set answers = question.answers %}
                        {% if answers|length %}
                        <div class="c-quiz__answers">
                            {% for answer in answers %}
                            <div class="c-quiz__answer">
                                <input type="radio" name="question{{ qNum }}" id="q{{ qNum }}a{{ loop.index }}" value="{{ answer.correct }}" />
                                <label for="q{{ qNum }}a{{ loop.index }}">{{ answer.answer }}</label>
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %}

                    </div>

                    {% set questionImage = question.image.all() %}
                    {% if questionImage[0] %}
                    <div class="c-quiz__image">
                        {{ questionImage[0].getImg() }}
                    </div>
                    {% endif %}

                </div>
            
            </div>
            {% endfor %}

        </div>

    </div>

    <div class="c-quiz__footer">

        <button class="e-button e-button--round e-button--disabled swiper-button-next c-quiz__next">
            Next question
        </button>

        <button class="e-button e-button--round e-button--hide e-button--disabled c-quiz__submit" data-results="{{ entry.parent.url }}/result">
            Submit
        </button>

        <a class="e-button e-button--small" href="/">Exit test</a>

    </div>

    {% endif %}

</div>